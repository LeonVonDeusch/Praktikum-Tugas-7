/* 
'########:::::'###::::'##::: ##:'########::'##:::'##:'########:'####:'##:::'##:'########::'####::::'###::::'########::'####:'########::::'###::::'##::: ##:'########::'####:
 ##.... ##:::'## ##::: ###:: ##: ##.... ##:. ##:'##::..... ##::. ##:: ##::'##:: ##.... ##:. ##::::'## ##::: ##.... ##:. ##:: ##.....::::'## ##::: ###:: ##: ##.... ##:. ##::
 ##:::: ##::'##:. ##:: ####: ##: ##:::: ##::. ####::::::: ##:::: ##:: ##:'##::: ##:::: ##:: ##:::'##:. ##:: ##:::: ##:: ##:: ##::::::::'##:. ##:: ####: ##: ##:::: ##:: ##::
 ##:::: ##:'##:::. ##: ## ## ##: ##:::: ##:::. ##::::::: ##::::: ##:: #####:::: ########::: ##::'##:::. ##: ########::: ##:: ######:::'##:::. ##: ## ## ##: ##:::: ##:: ##::
 ##:::: ##: #########: ##. ####: ##:::: ##:::: ##:::::: ##:::::: ##:: ##. ##::: ##.. ##:::: ##:: #########: ##.. ##:::: ##:: ##...:::: #########: ##. ####: ##:::: ##:: ##::
 ##:::: ##: ##.... ##: ##:. ###: ##:::: ##:::: ##::::: ##::::::: ##:: ##:. ##:: ##::. ##::: ##:: ##.... ##: ##::. ##::: ##:: ##::::::: ##.... ##: ##:. ###: ##:::: ##:: ##::
 ########:: ##:::: ##: ##::. ##: ########::::: ##:::: ########:'####: ##::. ##: ##:::. ##:'####: ##:::: ##: ##:::. ##:'####: ##::::::: ##:::: ##: ##::. ##: ########::'####:
........:::..:::::..::..::::..::........::::::..:::::........::....::..::::..::..:::::..::....::..:::::..::..:::::..::....::..::::::::..:::::..::..::::..::........:::....::
 :'#######::'##::::::::'########::::'##:::'########:::'#####:::'########:::'#####:::'########::::'##::::::'##::::::'##:::::'#####::::'#######::'########::::::::::::::::::::
'##.... ##: ##:::'##:: ##.....:::'####::: ##.....:::'##.. ##:: ##..  ##::'##.. ##:: ##..  ##::'####::::'####::::'####::::'##.. ##::'##.... ##: ##.....::::::::::::::::::::::
..::::: ##: ##::: ##:: ##::::::::.. ##::: ##:::::::'##:::: ##:..:: ##:::'##:::: ##:..:: ##::::.. ##::::.. ##::::.. ##:::'##:::: ##:..::::: ##: ##:::::::::::::::::::::::::::
:'#######:: ##::: ##:: #######::::: ##::: #######:: ##:::: ##:::: ##:::: ##:::: ##:::: ##::::::: ##:::::: ##:::::: ##::: ##:::: ##::'#######:: #######::::::::::::::::::::::
'##:::::::: #########:...... ##:::: ##:::...... ##: ##:::: ##::: ##::::: ##:::: ##::: ##:::::::: ##:::::: ##:::::: ##::: ##:::: ##::...... ##:...... ##:::::::::::::::::::::
 ##::::::::...... ##::'##::: ##:::: ##:::'##::: ##:. ##:: ##:::: ##:::::. ##:: ##:::: ##:::::::: ##:::::: ##:::::: ##:::. ##:: ##::'##:::: ##:'##::: ##:::::::::::::::::::::
 #########::::::: ##::. ######:::'######:. ######:::. #####::::: ##::::::. #####::::: ##::::::'######::'######::'######::. #####:::. #######::. ######::::::::::::::::::::::
.........::::::::..::::......::::......:::......:::::.....::::::..::::::::.....::::::..:::::::......:::......:::......::::.....:::::.......::::......:::::::::::::::::::::::
'########:'####:::::::::::'######:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
... ##..::. ##:::::::::::'##... ##::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
::: ##::::: ##::::::::::: ##:::..:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
::: ##::::: ##::'#######: ##::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
::: ##::::: ##::........: ##::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
::: ##::::: ##::::::::::: ##::: ##::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
::: ##::::'####::::::::::. ######:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:::..:::::....::::::::::::......::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/

import java.util.Scanner;

public class BankApp {
    public static void main(String[] args) { // Main method untuk menjalankan aplikasi
        Scanner scanner = new Scanner(System.in);

        // Membuat beberapa akun bank untuk demonstrasi
        BankAccount account1 = new BankAccount("John Doe", "123456789", "LeonVonDeusch", "Savings", "Bank A", 1000.0);
        BankAccount account2 = new BankAccount("Jane Doe", "987654321", "ManusiaBiasa123", "Checking", "Bank B", 500.0);
        
        // Simulasi login
        // Menggunakan array untuk menyimpan beberapa akun
        BankAccount[] accounts = {account1, account2};
        BankAccount loggedInAccount = null;

        // Menggunakan loop untuk login
        int maxAttempts = 3;
        int attempts = 0;
        boolean loginSuccess = false;

        // Menggunakan try-catch untuk menangani exception
        System.out.println("=== SELAMAT DATANG DI BANK ===");

        while (attempts < maxAttempts && !loginSuccess) {
            System.out.print("Masukkan nomor rekening: ");
            String inputAccount = scanner.nextLine();

            System.out.print("Masukkan password: ");
            String inputPassword = scanner.nextLine();

            try {
                loggedInAccount = BankAccount.login(accounts, inputAccount, inputPassword);
                loginSuccess = true;
                System.out.println("\nLogin berhasil.");
            } catch (AccountNotFoundException | WrongPasswordException e) {
                attempts++;
                System.out.println("Login gagal: " + e.getMessage());
                if (attempts < maxAttempts) {
                    System.out.println("Coba lagi. Percobaan tersisa: " + (maxAttempts - attempts));
                }
            }
        }

        if (!loginSuccess) {
            System.out.println("\n Kelas wak ngga bisa2. coba lagi nanti.");
            scanner.close();
            return;
        }

        // Setelah login berhasil
        System.out.println("Selamat datang, " + loggedInAccount.getAccountHolder() + "!");
        System.out.println("Saldo Anda saat ini: Rp" + loggedInAccount.getBalance());

        System.out.print("Masukkan jumlah yang ingin ditarik: ");

        try {
            double amount = scanner.nextDouble();
            loggedInAccount.withdraw(amount);
        } catch (InsufficientFundsException e) {
            System.out.println("Penarikan gagal: " + e.getMessage());
        } catch (IllegalArgumentException e) {
            System.out.println("Input tidak valid: " + e.getMessage());
        } catch (Exception e) {
            System.out.println("Kesalahan tak terduga: " + e.getMessage());
        } finally {
            System.out.println("Terima kasih telah menggunakan layanan kami.");
            scanner.close();
        }
    }
}
